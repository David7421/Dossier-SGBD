CREATE DATABASE LINK CBB.DBL CONNECT TO CBB IDENTIFIED BY CBB USING 'CBB';


CREATE OR REPLACE TRIGGER COPIECOTESAVIS
BEFORE INSERT ON EVALUATION
FOR EACH ROW
BEGIN
	IF :NEW.TOKEN IS NULL THEN :NEW.TOKEN := 'TRANSFERT';
		-- FAUT VERIFIER SI LE USER EXISTE
		INSERT INTO EVALUATION@CBB.DBL VALUES (IDFILM = :NEW.IDFILM, LOGIN = :NEW.LOGIN, COTE = :NEW.COTE, AVIS = :NEW.AVIS, DATEEVAL = :NEW.DATEEVAL);

	END IF;

	:NEW.TOKEN := NULL;
	--WHEN OTHERS THEN RAISE
END;
/
